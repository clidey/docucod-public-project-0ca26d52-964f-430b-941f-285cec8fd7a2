---
title: "Preparing Your Repository"
description: "Guides you through ensuring your project structure meets expectations for Wails v2, highlights key files (such as wails.json), and summarizes the important repository setup steps so the action runs smoothly—from codebase layout to submodules."
---

# Preparing Your Repository for dAppServer/wails-build-action

Welcome to the essential guide for preparing your repository to work seamlessly with the **dAppServer/wails-build-action**. This page walks you through the critical structure and configuration your project needs before running the build action, ensuring a smooth automated build experience for your Wails v2 desktop application.

---

## 1. Understanding Your Project Structure

Your repository must align with certain expectations to enable the build action to function correctly. The action assumes your Wails v2 application source code is arranged according to the standard Wails conventions.

Key points to validate:

- **Root Directory**: Your project's root directory should include the necessary Wails v2 configuration file `wails.json`.
- **Frontend Directory**: Your frontend assets and source code should be under a dedicated folder (commonly `frontend/`), containing your HTML, CSS, JS, and build-related files.
- **Go Backend Code**: Your backend Go code, including the main application entry point (usually `main.go`), should reside alongside a valid Go module structure.
- **Submodules**: If your project includes git submodules (e.g., for frontend dependencies or shared libraries), ensure they are initialized and updated before the build.

### Typical Layout Example

```plaintext
/ (root)
├── frontend/
│   ├── src/
│   ├── dist/
│   ├── package.json
│   └── wails.json
├── go.mod
├── main.go
└── README.md
```

This layout reflects:
- `wails.json` at your root or frontend directory (based on your config).
- Frontend sources inside `frontend/src/`.
- The built frontend assets inside `frontend/dist/` (typically generated by your frontend build process).
- Backend entrypoint `main.go` and Go module files.


## 2. Key File: `wails.json`

The **`wails.json`** file configures your Wails application and is mandatory at the repository root or referenced working directory for the build action.

Here’s what you need to check:

- **Presence and Validity**: `wails.json` must exist and be a valid JSON file.
- **Basic Required Fields**:
  - `name`: The application name.
  - `outputfilename`: The filename for the output binary.
  - `frontend:install`: Your frontend installation command, e.g., `npm install`.
  - `frontend:build`: The command to build your frontend, e.g., `npm run build`.
  - `frontend:dev:watcher` and `frontend:dev:serverUrl` for dev environment configurations.
  - `author`: An object with `name` and `email`.

Example snippet:

```json
{
  "$schema": "https://wails.io/schemas/config.v2.json",
  "name": "wails",
  "outputfilename": "wails",
  "frontend:install": "npm install",
  "frontend:build": "npm run build",
  "frontend:dev:watcher": "npm run dev",
  "frontend:dev:serverUrl": "auto",
  "author": {
    "name": "Snider",
    "email": "snider@lt.hn"
  }
}
```

**Tip:** Keep your `wails.json` committed and up to date with your frontend build commands to avoid build failures.

## 3. Managing Frontend Code

Your frontend source files typically include:

- An `index.html` file as the application entry point.
- JavaScript files (like `main.js`) that bootstrap and interact with Wails backend bindings.
- Styling files (`style.css`, `app.css`).
- Static assets (images, fonts).

Make sure:

- Your frontend build command (`npm run build` or equivalent) correctly outputs static assets to the folder configured in `wails.json` (typically `frontend/dist/`).
- Any dependencies in your frontend (npm packages) are installed before building.

**Checklist:**
- Verify `frontend/package.json` exists and lists dependencies.
- Run locally `npm install` and `npm run build` without errors.
- Confirm built files are in the expected output directory.

## 4. Working with Go Backend Code

Your Go backend is the core of the application:

- Ensure the `main.go` file exists and follows Wails v2 conventions.
- You should have an `embed` directive loading frontend assets from the build output directory.
- Backend structures and methods should be defined and bound properly.

Example from `main.go`:

```go
package main

import (
	"embed"

	"github.com/wailsapp/wails/v2"
	"github.com/wailsapp/wails/v2/pkg/options"
	"github.com/wailsapp/wails/v2/pkg/options/assetserver"
)

//go:embed all:frontend/dist
var assets embed.FS

func main() {
	app := NewApp()
	err := wails.Run(&options.App{
		Title:  "wails",
		Width:  1024,
		Height: 768,
		AssetServer: &assetserver.Options{
			Assets: assets,
		},
		BackgroundColour: &options.RGBA{R: 27, G: 38, B: 54, A: 1},
		OnStartup:        app.startup,
		Bind: []interface{}{
			app,
		},
	})

	if err != nil {
		println("Error:", err.Error())
	}
}
```

> This example loads frontend static files embedded in the binary, a common Wails v2 pattern.

## 5. Handling Git Submodules

If your project relies on submodules (common with shared components or embedded frontends), prepare them before the build:

```bash
# Initialize and update submodules
 git submodule update --init --recursive
```

Make sure your CI workflow or local environment includes this step so that the build action has full access to all required source.

## 6. Final Checks Before Build

Execute these validation steps locally to prevent build failures:

- Confirm `wails.json` is valid and correctly configured.
- Run frontend install and build commands
  ```bash
  npm install
  npm run build
  ```
- Confirm backend Go build works
  ```bash
  go build
  ```
- Ensure all submodules are initialized
  ```bash
  git submodule update --init --recursive
  ```

## 7. Troubleshooting Preparation Issues

<AccordionGroup title="Common Setup Issues and Solutions">
<Accordion title="Missing or Invalid wails.json">
Check that your `wails.json` is at the correct path and valid JSON. Misconfigurations here cause build failures.
</Accordion>
<Accordion title="Frontend Build Failures">
Ensure your `frontend:install` and `frontend:build` commands in `wails.json` run smoothly locally. Missing dependencies or script errors will stop CI builds.
</Accordion>
<Accordion title="Submodules Not Initialized">
If resources are missing, verify submodules are initialized and updated before the build starts.
</Accordion>
<Accordion title="Incorrect Directory Structure">
Validate your repository structure matches the expected layout; misplaced files or folders can cause assets not to resolve.
</Accordion>
</AccordionGroup>

---

### Summary
Ensuring your repository is prepared following the steps above means your builds with dAppServer/wails-build-action will proceed reliably. This preparation sets a solid foundation to automate your Wails v2 project builds effectively.

---

## Related Documentation
- [System Requirements & Prerequisites](./system-requirements)
- [Adding the Action to GitHub Workflows](./adding-action-github)
- [Configuring Build Options](./build-options-configuration)
- [Running Your First Build](./running-your-first-build)
- [Setting Up Code Signing (MacOS & Windows)](./code-signing-setup)


---

## Next Steps
Once your repository is prepared, proceed to **Adding the Action to GitHub Workflows** to integrate the build action into your CI pipeline and automate your first build.

<Tip>
Always validate your repository setup by running builds locally before pushing changes to CI.
</Tip>

<Check>
Make sure all git submodules are synchronized and your `wails.json` matches the frontend setup commands.
</Check>
